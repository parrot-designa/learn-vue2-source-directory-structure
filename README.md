ğŸ”¥ä»é›¶æ‰‹å†™vue2 - æºç ç›®å½•ç»“æ„

æœ¬ä¸“æ æ˜¯æ‰“ç®—ä»é›¶æ‰‹å†™ä¸€ä¸ª vue2ï¼Œå¹¶å­¦ä¹  vue2 ä¸­çš„ä¸€äº›æ ¸å¿ƒç†å¿µã€‚

[ä¸“æ æ–‡ç« ä¸€ - ğŸ”¥ä»é›¶æ‰‹å†™vue2 - è™šæ‹ŸèŠ‚ç‚¹ä»¥åŠcreateElementå‡½æ•°](https://juejin.cn/post/7421103437607370806)

[ä¸“æ æ–‡ç« äºŒ - ğŸ”¥ä»é›¶æ‰‹å†™vue2 - templateæ¨¡æ¿è§£æ](https://juejin.cn/post/7427468776995012627)

# ä¸€ã€é vueæ ¸å¿ƒæºç ç›®å½•å¤§ä½“ç»“æ„

å‰é¢ 2 èŠ‚ä¸­æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº† vue ä¸­çš„è™šæ‹ŸèŠ‚ç‚¹ä»¥åŠæ¨¡æ¿è§£æã€‚

ä½†æ˜¯å¯¹ vue2 æºç çš„æ€»ä½“ç›®å½•ç»“æ„å¹¶æ²¡æœ‰æåŠã€‚

æ‰€ä»¥æˆ‘ä»¬è¿™ç« å°±å¤§æ¦‚æè¿°ä¸‹ vue2 æºç çš„ç›®å½•ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚ 

> æˆ‘ä»¬çœ‹çš„ vueæºç  ç‰ˆæœ¬æ˜¯ 2.7.16 æ˜¯ vue2 çš„æœ€æ–°ç‰ˆæœ¬

æˆ‘ä»¬æ‰“å¼€vue2çš„[github](https://github.com/vuejs/vue)æºç åœ°å€ã€‚

![alt text](image.png)

å¯ä»¥çœ‹åˆ°å…¶ä¸­æœ‰å¾ˆå¤šä¸ªç›®å½•æ–‡ä»¶ï¼Œä½†æ˜¯å…¶å® Vue2 æºç æ ¸å¿ƒçš„éƒ½æ˜¯åœ¨ srcæ–‡ä»¶å¤¹ä¸­çš„ã€‚

æˆ‘ä»¬è¿™ç« å¤§æ¦‚ä»‹ç»ä¸€ä¸‹é™¤äº† src ä¸‹é¢çš„ä¸€äº›ç›®å½•ï¼Œäº†è§£ä¸€ä¸‹å¤§ä½“çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚

## 1.1 `.github`

è¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ä¸ gitHub ç›¸å…³çš„é…ç½®æ–‡ä»¶æˆ–è€…è„šæœ¬ã€‚ 

## 1.2 `benchmarks`

è¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾æ€§èƒ½åŸºå‡†æµ‹è¯•çš„ç›¸å…³æ–‡ä»¶å’Œè„šæœ¬ã€‚

> æ€§èƒ½åŸºå‡†æµ‹è¯•æ˜¯ä¸€ç§ç”¨æ¥è¯„ä¼°è½¯ä»¶æ€§èƒ½çš„æ–¹æ³•ï¼Œå®ƒé€šè¿‡æ¨¡æ‹ŸçœŸå®ä¸–ç•Œä¸­çš„ä½¿ç”¨åœºæ™¯æ¥æµ‹é‡è½¯ä»¶åœ¨ä¸åŒæ¡ä»¶ä¸‹çš„è¡¨ç°ã€‚
> 
> å¯ä»¥ç¡®ä¿æ–°åŠŸèƒ½ä¸ä¼šé™ä½æ¡†æ¶çš„æ•´ä½“æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥ä¼˜åŒ–ç°æœ‰ä»£ç ï¼Œä½¿å…¶æ›´åŠ é«˜æ•ˆã€‚

## 1.3. `compiler-sfc`

è¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹é€»è¾‘å°±å¯ä»¥ååŠ© webpackè¿›è¡Œè§£æå¤„ç†å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ã€‚

> é€šå¸¸æˆ‘ä»¬å¼€å‘æ—¶ä¼šå€ŸåŠ© webpackå°† vueæ–‡ä»¶è½¬åŒ–ä¸ºä¸€ä¸ª JSå¯¹è±¡ã€‚
 
å¯ä»¥æŸ¥çœ‹ä»–çš„ index.jsæ–‡ä»¶ å‘ç°å®é™…ä¸Šå°±æ˜¯å¯¼å‡ºäº†`@vue/compiler-sfc`è¿™ä¸ªåŒ…ã€‚

```js
module.exports = require('@vue/compiler-sfc')
```

## 1.4. `dist`

è¯¥æ–‡ä»¶å¤¹ä¸ºæ‰“åŒ…æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹ã€‚

## 1.5. `examples`

è¯¥æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç¤ºä¾‹åº”ç”¨ç¨‹åºæˆ–ä»£ç ç‰‡æ®µï¼Œç›®çš„æ˜¯å±•ç¤º Vue.js çš„åŸºæœ¬ç”¨æ³•å’ŒåŠŸèƒ½ã€‚

## 1.6 `packages`

è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºç»„ç»‡ Vue.js çš„å„ä¸ªå­åŒ…æˆ–æ¨¡å—ã€‚

éšç€ Vue.js é¡¹ç›®çš„å¤æ‚åº¦å¢åŠ ï¼Œå°†ä¸åŒçš„åŠŸèƒ½æ¨¡å—æ‹†åˆ†æˆç‹¬ç«‹çš„å­åŒ…å·²ç»æˆä¸ºäº†ä¸€ç§å¸¸è§çš„åšæ³•ã€‚

è¿™æ ·ä¸ä»…æœ‰åˆ©äºæ¨¡å—åŒ–å¼€å‘ï¼Œè¿˜èƒ½æ–¹ä¾¿ä¾èµ–ç®¡ç†å’Œå‘å¸ƒã€‚

è¯¥ç›®å½•ä¸‹æœ‰ä¸‰ä¸ªç›®å½•ã€‚

### 1.6.1 `compiler-sfc`

è¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ä¸»è¦ç”¨äºå¤„ç†å•æ–‡ä»¶ç»„ä»¶ã€‚

### 1.6.2 `server-renderer`

è¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹å’ŒæœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³çš„å†…å®¹ã€‚

### 1.6.3 `template-compiler`

è¯¥æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹å­˜æ”¾æ¨¡æ¿ç¼–è¯‘ç›¸å…³çš„é€»è¾‘ã€‚

## 1.7 `scripts`

è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾å„ç§è‡ªåŠ¨åŒ–è„šæœ¬ã€‚

è¿™äº›è„šæœ¬é€šå¸¸ç”¨äºè¾…åŠ©é¡¹ç›®çš„æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒå’Œå…¶ä»–å¼€å‘ä»»åŠ¡ã€‚

## 1.8 `src`

è¯¥æ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ vueæ¡†æ¶æ ¸å¿ƒæºç çš„åœ°æ–¹ã€‚

> åé¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´ä¸€ä¸‹ã€‚

## 1.9 `test`

è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾å„ç§ç±»å‹çš„æµ‹è¯•æ–‡ä»¶ï¼Œè¿™äº›æµ‹è¯•æ–‡ä»¶ç”¨äºéªŒè¯ Vue.js æ¡†æ¶çš„åŠŸèƒ½æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚

## 1.10 `types`

è¯¥æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºå­˜æ”¾ TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚

> è¿™äº›ç±»å‹å®šä¹‰æ–‡ä»¶ä¸º Vue.js æä¾›äº†ç±»å‹æ”¯æŒï¼Œä½¿å¾—åœ¨ä½¿ç”¨ Vue.js æ—¶å¯ä»¥äº«å—é™æ€ç±»å‹æ£€æŸ¥çš„å¥½å¤„ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚

## 1.11 `.editorconfig`

è¯¥æ–‡ä»¶ç”¨äºæŒ‡å®šç¼–è¾‘å™¨åº”è¯¥éµå¾ªçš„ä¸€ç³»åˆ—ç¼–ç å’Œæ ¼å¼åŒ–è§„åˆ™ã€‚

## 1.12 `.git-blame-ignore-revs`

è¯¥æ–‡ä»¶ç”¨äºå‘Šè¯‰ Git åœ¨æ‰§è¡Œ git blame å‘½ä»¤æ—¶å¿½ç•¥æŸäº›ç‰¹å®šçš„æäº¤è®°å½•ã€‚

## 1.13 `.gitignore`

è¯¥æ–‡ä»¶ç”¨äºæŒ‡å®š Git åº”è¯¥å¿½ç•¥å“ªäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œå³ä¸å°†è¿™äº›æ–‡ä»¶æˆ–ç›®å½•çº³å…¥ç‰ˆæœ¬æ§åˆ¶ã€‚

## 1.14 `.prettierrc`

è¯¥æ–‡ä»¶ç”¨äºé…ç½® Prettierã€‚

> Prettieræ˜¯ä¸€ä¸ªæµè¡Œçš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚
>
> Prettier å¯ä»¥è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œä½¿å…¶ç¬¦åˆé¢„è®¾çš„ç¼–ç è§„èŒƒï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚

## 1.15 `BACKERS.md`

è¯¥æ–‡ä»¶ä¸»è¦ç”¨äºè®°å½•å’Œæ”¯æŒ Vue.js é¡¹ç›®çš„èµåŠ©è€…æˆ–è´¡çŒ®è€…ã€‚

> è¿™ä»½æ–‡ä»¶é€šå¸¸åˆ—å‡ºäº†é‚£äº›é€šè¿‡èµ„é‡‘æˆ–å…¶ä»–å½¢å¼æ”¯æŒ Vue.js å‘å±•çš„ä¸ªäººæˆ–ç»„ç»‡ã€‚

## 1.16 `CHANGELOG.md`

è¯¥æ–‡ä»¶ä¸»è¦ç”¨äºè®°å½•é¡¹ç›®çš„ç‰ˆæœ¬å˜æ›´å†å²ï¼ŒåŒ…æ‹¬æ¯ä¸ªç‰ˆæœ¬çš„æ–°å¢åŠŸèƒ½ã€æ”¹è¿›ã€ä¿®å¤çš„é”™è¯¯ä»¥åŠå…¶ä»–é‡è¦çš„å˜æ›´ä¿¡æ¯ã€‚

## 1.17 `LICENSE`

è¯¥æ–‡ä»¶ç”¨æ¥å®šä¹‰å’Œå£°æ˜é¡¹ç›®ä½¿ç”¨çš„è®¸å¯åè®®çš„æ–‡ä»¶

## 1.18 `README.md`

è¯¥æ–‡ä»¶ä¸ºé¡¹ç›®çš„å…¥å£æ–‡æ¡£æ–‡ä»¶ã€‚

> æ–‡ä»¶æä¾›äº†å…³äºé¡¹ç›®çš„æ¦‚è¿°ã€å®‰è£…æ­¥éª¤ã€ä½¿ç”¨æ–¹æ³•ã€è´¡çŒ®æŒ‡å—ç­‰å…³é”®ä¿¡æ¯ã€‚

## 1.19 `api-extractor.json`

è¯¥æ–‡ä»¶ç”¨äºé…ç½® API Extractor å·¥å…·ï¼ˆè¿™æ˜¯ä¸€ç§ç”¨äºç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰æ–‡æ¡£å’Œ API æŠ¥å‘Šçš„å·¥å…·ï¼‰

> API Extractor é€šå¸¸ç”¨äºå¤§å‹ TypeScript é¡¹ç›®ä¸­ï¼Œå¸®åŠ©å¼€å‘è€…ç”Ÿæˆè¯¦ç»†çš„ API æ–‡æ¡£ï¼Œå¹¶ç¡®ä¿ç±»å‹å®šä¹‰çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚

## 1.20 `api-extractor.tsconfig.json`

è¯¥æ–‡ä»¶ç”¨äºé…ç½® TypeScript ç¼–è¯‘é€‰é¡¹ï¼Œä»¥é…åˆ API Extractor å·¥å…·ç”Ÿæˆ API æ–‡æ¡£å’Œç±»å‹å®šä¹‰æ–‡ä»¶ã€‚

> è¿™ä¸ªæ–‡ä»¶é€šå¸¸åŒ…å«äº†ä¸€äº›ç‰¹å®šçš„ TypeScript é…ç½®ï¼Œç¡®ä¿ API Extractor èƒ½å¤Ÿæ­£ç¡®åœ°è§£æå’Œå¤„ç†æºä»£ç ã€‚

## 1.21 `package.json`

è¯¥æ–‡ä»¶æ˜¯é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œç”¨äºæè¿°é¡¹ç›®çš„å…ƒæ•°æ®ä»¥åŠé¡¹ç›®ä¾èµ–å…³ç³»å’Œæ„å»ºè„šæœ¬ã€‚

## 1.22 `pnpm-lock.yaml`

è¯¥æ–‡ä»¶æ˜¯ç”± pnpm åŒ…ç®¡ç†å™¨ç”Ÿæˆçš„é”å®šæ–‡ä»¶ã€‚

ç”¨äºè®°å½•é¡¹ç›®ä¸­æ‰€æœ‰ä¾èµ–é¡¹çš„å…·ä½“ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•è¢«å®‰è£…çš„ã€‚

> pnpm æ˜¯ä¸€ç§æ›¿ä»£ npm å’Œ yarn çš„é«˜æ€§èƒ½åŒ…ç®¡ç†å™¨ï¼Œå®ƒå…·æœ‰æ›´å¿«çš„é€Ÿåº¦å’Œæ›´å°‘çš„ç£ç›˜ç©ºé—´å ç”¨ã€‚

## 1.23 `pnpm-workspace.yaml`

è¯¥æ–‡ä»¶ç”¨äºé…ç½® pnpm å·¥ä½œåŒºï¼ˆworkspaceï¼‰ã€‚

> pnpm æ”¯æŒå¤šé¡¹ç›®çš„å·¥ä½œåŒºæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼å…è®¸å¤šä¸ªç›¸å…³é¡¹ç›®å…±äº«ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°ç®¡ç†è¿™äº›é¡¹ç›®çš„ä¾èµ–å…³ç³»å’Œæ„å»ºæµç¨‹ã€‚

## 1.24 `tsconfig.json`

è¯¥æ–‡ä»¶æ˜¯ TypeScript ç¼–è¯‘é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ TypeScript ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºä»£ç æ—¶åº”éµå¾ªçš„é€‰é¡¹å’Œè§„åˆ™ã€‚

## 1.25 `vitest.config.ts`

è¯¥æ–‡ä»¶ç”¨äºé…ç½® Vitest çš„æµ‹è¯•æ¡†æ¶é…ç½®æ–‡ä»¶ã€‚

Vitest æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ JavaScript å’Œ TypeScript æµ‹è¯•æ¡†æ¶ï¼Œå®ƒæä¾›äº†å¿«é€Ÿçš„æµ‹è¯•è¿è¡Œé€Ÿåº¦å’Œä¸°å¯Œçš„åŠŸèƒ½é›†ï¼Œé€‚ç”¨äºå‰ç«¯å’Œåç«¯å¼€å‘ã€‚

# äºŒã€srcç›®å½•ä¸‹æœ‰ä»€ä¹ˆï¼Ÿ

ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬ç®€å•ä»‹ç»äº†ä¸€ä¸‹é srcæ–‡ä»¶å¤¹ä¸‹é¢çš„ä¸€äº›æ–‡ä»¶å†…å®¹ã€‚

è¿™äº›éƒ½æ˜¯åœ¨ä¸€ä¸ªå·¥ç¨‹åŒ–çš„æ¡†æ¶é¡¹ç›®ä¸­å¿…ä¸å¯å°‘çš„éƒ¨åˆ†ã€‚

é‚£ä¹ˆæœ¬èŠ‚çš„å†…å®¹å°±æ˜¯çœ‹ä¸‹ src æ–‡ä»¶å¤¹ä¸‹åŒ…å«å“ªäº›å†…å®¹ã€‚

ä¸‹é¢è¿™ä¸ªç›®å½•ç»“æ„å»é™¤äº† tsç›¸å…³çš„å£°æ˜æ–‡ä»¶ã€‚

```html
src
â”œâ”€shared
|   â”œâ”€constants.ts
|   â””util.ts
â”œâ”€platforms
|     â”œâ”€web
|     |  â”œâ”€entry-compiler.ts
|     |  â”œâ”€entry-runtime-esm.ts
|     |  â”œâ”€entry-runtime-with-compiler-esm.ts
|     |  â”œâ”€entry-runtime-with-compiler.ts
|     |  â”œâ”€entry-runtime.ts
|     |  â”œâ”€runtime-with-compiler.ts
|     |  â”œâ”€util
|     |  |  â”œâ”€attrs.ts
|     |  |  â”œâ”€class.ts
|     |  |  â”œâ”€compat.ts
|     |  |  â”œâ”€element.ts
|     |  |  â”œâ”€index.ts
|     |  |  â””style.ts
|     |  â”œâ”€runtime
|     |  |    â”œâ”€class-util.ts
|     |  |    â”œâ”€index.ts
|     |  |    â”œâ”€node-ops.ts
|     |  |    â”œâ”€patch.ts
|     |  |    â”œâ”€transition-util.ts
|     |  |    â”œâ”€modules
|     |  |    |    â”œâ”€attrs.ts
|     |  |    |    â”œâ”€class.ts
|     |  |    |    â”œâ”€dom-props.ts
|     |  |    |    â”œâ”€events.ts
|     |  |    |    â”œâ”€index.ts
|     |  |    |    â”œâ”€style.ts
|     |  |    |    â””transition.ts
|     |  |    â”œâ”€directives
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€model.ts
|     |  |    |     â””show.ts
|     |  |    â”œâ”€components
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€transition-group.ts
|     |  |    |     â””transition.ts
|     |  â”œâ”€compiler
|     |  |    â”œâ”€index.ts
|     |  |    â”œâ”€options.ts
|     |  |    â”œâ”€util.ts
|     |  |    â”œâ”€modules
|     |  |    |    â”œâ”€class.ts
|     |  |    |    â”œâ”€index.ts
|     |  |    |    â”œâ”€model.ts
|     |  |    |    â””style.ts
|     |  |    â”œâ”€directives
|     |  |    |     â”œâ”€html.ts
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€model.ts
|     |  |    |     â””text.ts
â”œâ”€core
|  â”œâ”€config.ts
|  â”œâ”€index.ts
|  â”œâ”€vdom
|  |  â”œâ”€create-component.ts
|  |  â”œâ”€create-element.ts
|  |  â”œâ”€create-functional-component.ts
|  |  â”œâ”€patch.ts
|  |  â”œâ”€vnode.ts
|  |  â”œâ”€modules
|  |  |    â”œâ”€directives.ts
|  |  |    â”œâ”€index.ts
|  |  |    â””template-ref.ts
|  |  â”œâ”€helpers
|  |  |    â”œâ”€extract-props.ts
|  |  |    â”œâ”€get-first-component-child.ts
|  |  |    â”œâ”€index.ts
|  |  |    â”œâ”€is-async-placeholder.ts
|  |  |    â”œâ”€merge-hook.ts
|  |  |    â”œâ”€normalize-children.ts
|  |  |    â”œâ”€normalize-scoped-slots.ts
|  |  |    â”œâ”€resolve-async-component.ts
|  |  |    â””update-listeners.ts
|  â”œâ”€util
|  |  â”œâ”€debug.ts
|  |  â”œâ”€env.ts
|  |  â”œâ”€error.ts
|  |  â”œâ”€index.ts
|  |  â”œâ”€lang.ts
|  |  â”œâ”€next-tick.ts
|  |  â”œâ”€options.ts
|  |  â”œâ”€perf.ts
|  |  â””props.ts
|  â”œâ”€observer
|  |    â”œâ”€array.ts
|  |    â”œâ”€dep.ts
|  |    â”œâ”€index.ts
|  |    â”œâ”€scheduler.ts
|  |    â”œâ”€traverse.ts
|  |    â””watcher.ts
|  â”œâ”€instance
|  |    â”œâ”€events.ts
|  |    â”œâ”€index.ts
|  |    â”œâ”€init.ts
|  |    â”œâ”€inject.ts
|  |    â”œâ”€lifecycle.ts
|  |    â”œâ”€proxy.ts
|  |    â”œâ”€render.ts
|  |    â”œâ”€state.ts
|  |    â”œâ”€render-helpers
|  |    |       â”œâ”€bind-dynamic-keys.ts
|  |    |       â”œâ”€bind-object-listeners.ts
|  |    |       â”œâ”€bind-object-props.ts
|  |    |       â”œâ”€check-keycodes.ts
|  |    |       â”œâ”€index.ts
|  |    |       â”œâ”€render-list.ts
|  |    |       â”œâ”€render-slot.ts
|  |    |       â”œâ”€render-static.ts
|  |    |       â”œâ”€resolve-filter.ts
|  |    |       â”œâ”€resolve-scoped-slots.ts
|  |    |       â””resolve-slots.ts
|  â”œâ”€global-api
|  |     â”œâ”€assets.ts
|  |     â”œâ”€extend.ts
|  |     â”œâ”€index.ts
|  |     â”œâ”€mixin.ts
|  |     â””use.ts
|  â”œâ”€components
|  |     â”œâ”€index.ts
|  |     â””keep-alive.ts
â”œâ”€compiler
|    â”œâ”€codeframe.ts
|    â”œâ”€create-compiler.ts
|    â”œâ”€error-detector.ts
|    â”œâ”€helpers.ts
|    â”œâ”€index.ts
|    â”œâ”€optimizer.ts
|    â”œâ”€to-function.ts
|    â”œâ”€parser
|    |   â”œâ”€entity-decoder.ts
|    |   â”œâ”€filter-parser.ts
|    |   â”œâ”€html-parser.ts
|    |   â”œâ”€index.ts
|    |   â””text-parser.ts
|    â”œâ”€directives
|    |     â”œâ”€bind.ts
|    |     â”œâ”€index.ts
|    |     â”œâ”€model.ts
|    |     â””on.ts
|    â”œâ”€codegen
|    |    â”œâ”€events.ts
|    |    â””index.ts
```

# ä¸‰ã€sharedæ–‡ä»¶å¤¹ 

```html
src
â”œâ”€shared
|   â”œâ”€constants.ts
|   â””util.ts
```
è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«äº†ä¸€äº›åœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½éœ€è¦å…±äº«çš„å·¥å…·å‡½æ•°æˆ–è€…å¸¸é‡ã€‚

è¿™ä¸ªå·¥å…·å‡½æ•°ä¸å¹³å°æ— å…³ã€‚

æ—¢å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡ç«¯ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„ç¯å¢ƒç‰¹æ€§ï¼ˆä¾‹å¦‚ DOMï¼‰ã€‚

* constants.tsæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›åœ¨æ•´ä¸ªæ¡†æ¶å†…é¢‘ç¹ä½¿ç”¨çš„å¸¸é‡ï¼Œæ¯”å¦‚ç‰¹æ®Šçš„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦ã€é…ç½®é”®åç­‰ã€‚
* util.tsæ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€äº›åŸºç¡€çš„å·¥å…·å‡½æ•°ï¼Œæ¯”å¦‚ isStringã€isObjectå’Œå…¶ä»–ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå¦‚æ·±æ‹·è´ã€è­¦å‘Šè¾“å‡ºç­‰ã€‚

è¿™äº›æ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚

é€šè¿‡å°†è¿™äº›åŠŸèƒ½æŠ½è±¡å‡ºæ¥ï¼ŒVue.js èƒ½å¤Ÿä¿æŒæ ¸å¿ƒé€»è¾‘çš„ç®€æ´ï¼Œå¹¶ä¸”ç¡®ä¿ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„å…¼å®¹æ€§ã€‚

è¿™æ ·åšçš„å¥½å¤„æ˜¯å‡å°‘äº†é‡å¤ä»£ç ï¼Œä½¿å¾—ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚

# å››ã€platformsæ–‡ä»¶å¤¹ 

```html
â”œâ”€platforms
|     â”œâ”€web
|     |  â”œâ”€entry-compiler.ts
|     |  â”œâ”€entry-runtime-esm.ts
|     |  â”œâ”€entry-runtime-with-compiler-esm.ts
|     |  â”œâ”€entry-runtime-with-compiler.ts
|     |  â”œâ”€entry-runtime.ts
|     |  â”œâ”€runtime-with-compiler.ts
|     |  â”œâ”€util
|     |  |  â”œâ”€attrs.ts
|     |  |  â”œâ”€class.ts
|     |  |  â”œâ”€compat.ts
|     |  |  â”œâ”€element.ts
|     |  |  â”œâ”€index.ts
|     |  |  â””style.ts
|     |  â”œâ”€runtime
|     |  |    â”œâ”€class-util.ts
|     |  |    â”œâ”€index.ts
|     |  |    â”œâ”€node-ops.ts
|     |  |    â”œâ”€patch.ts
|     |  |    â”œâ”€transition-util.ts
|     |  |    â”œâ”€modules
|     |  |    |    â”œâ”€attrs.ts
|     |  |    |    â”œâ”€class.ts
|     |  |    |    â”œâ”€dom-props.ts
|     |  |    |    â”œâ”€events.ts
|     |  |    |    â”œâ”€index.ts
|     |  |    |    â”œâ”€style.ts
|     |  |    |    â””transition.ts
|     |  |    â”œâ”€directives
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€model.ts
|     |  |    |     â””show.ts
|     |  |    â”œâ”€components
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€transition-group.ts
|     |  |    |     â””transition.ts
|     |  â”œâ”€compiler
|     |  |    â”œâ”€index.ts
|     |  |    â”œâ”€options.ts
|     |  |    â”œâ”€util.ts
|     |  |    â”œâ”€modules
|     |  |    |    â”œâ”€class.ts
|     |  |    |    â”œâ”€index.ts
|     |  |    |    â”œâ”€model.ts
|     |  |    |    â””style.ts
|     |  |    â”œâ”€directives
|     |  |    |     â”œâ”€html.ts
|     |  |    |     â”œâ”€index.ts
|     |  |    |     â”œâ”€model.ts
|     |  |    |     â””text.ts
```


## 4.1 ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªplatformsç›®å½•å‘¢ï¼Ÿ

platforms ç¿»è¯‘æˆä¸­æ–‡è¡¨ç¤ºâ€œå¹³å°â€œã€‚

å› ä¸º vueä½œä¸ºä¸€ä¸ªè·¨å¹³å°çš„æ¡†æ¶ï¼Œä¸ä»…æ”¯æŒä¼ ç»Ÿçš„webæµè§ˆå™¨ç¯å¢ƒï¼Œè¿˜æ”¯æŒå…¶ä»–å¹³å°ï¼Œå¦‚æœåŠ¡å™¨æ¸²æŸ“ï¼ˆSSRï¼‰ï¼Œç”šè‡³æ˜¯éæµè§ˆå™¨ç¯å¢ƒã€‚

å› æ­¤